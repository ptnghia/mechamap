<?php

/**
 * ADD REMAINING FRONTEND KEYS
 * Th√™m c√°c keys c√≤n l·∫°i cho frontend user experience
 */

echo "=== ADDING REMAINING FRONTEND KEYS ===\n\n";

// Additional frontend keys based on analysis
$additionalKeys = [
    // Gallery and media
    'gallery' => [
        'search_placeholder' => ['vi' => 'T√¨m ki·∫øm th∆∞ vi·ªán...', 'en' => 'Search gallery...'],
        'uploaded_by' => ['vi' => 'T·∫£i l√™n b·ªüi', 'en' => 'Uploaded by'],
        'by' => ['vi' => 'B·ªüi', 'en' => 'By'],
        'no_media_found' => ['vi' => 'Kh√¥ng t√¨m th·∫•y media n√†o', 'en' => 'No media items found'],
        'upload_media' => ['vi' => 'T·∫£i l√™n media', 'en' => 'Upload Media'],
        'select_file' => ['vi' => 'Ch·ªçn file', 'en' => 'Select File'],
        'title' => ['vi' => 'Ti√™u ƒë·ªÅ', 'en' => 'Title'],
        'title_help' => ['vi' => 'ƒê·∫∑t ti√™u ƒë·ªÅ m√¥ t·∫£ cho media (t√πy ch·ªçn)', 'en' => 'Give your media a descriptive title (optional)'],
        'description' => ['vi' => 'M√¥ t·∫£', 'en' => 'Description'],
        'description_help' => ['vi' => 'Th√™m m√¥ t·∫£ cho media (t√πy ch·ªçn)', 'en' => 'Add a description for your media (optional)'],
        'upload' => ['vi' => 'T·∫£i l√™n', 'en' => 'Upload'],
        'comments' => ['vi' => 'B√¨nh lu·∫≠n', 'en' => 'Comments'],
        'comments_coming_soon' => ['vi' => 'T√≠nh nƒÉng b√¨nh lu·∫≠n s·∫Øp ra m·∫Øt', 'en' => 'Comments feature coming soon'],
        'media_information' => ['vi' => 'Th√¥ng tin media', 'en' => 'Media Information'],
        'uploaded' => ['vi' => 'ƒê√£ t·∫£i l√™n', 'en' => 'Uploaded'],
    ],
    
    // Profile and user
    'profile' => [
        'last_seen' => ['vi' => 'L·∫ßn cu·ªëi truy c·∫≠p:', 'en' => 'Last seen:'],
        'replies' => ['vi' => 'Tr·∫£ l·ªùi', 'en' => 'Replies'],
        'threads' => ['vi' => 'Ch·ªß ƒë·ªÅ', 'en' => 'Threads'],
        'reactions' => ['vi' => 'Ph·∫£n ·ª©ng', 'en' => 'Reactions'],
        'about' => ['vi' => 'Gi·ªõi thi·ªáu', 'en' => 'About'],
        'registered' => ['vi' => 'ƒê√£ ƒëƒÉng k√Ω', 'en' => 'Registered'],
        'joined' => ['vi' => 'Tham gia', 'en' => 'Joined'],
        'never' => ['vi' => 'Ch∆∞a bao gi·ªù', 'en' => 'Never'],
        'viewing_member_profile' => ['vi' => 'ƒêang xem h·ªì s∆° th√†nh vi√™n', 'en' => 'Viewing member profile'],
        'see_all' => ['vi' => 'Xem t·∫•t c·∫£', 'en' => 'See All'],
        'about_me' => ['vi' => 'V·ªÅ t√¥i', 'en' => 'About Me'],
        'edit_in_settings' => ['vi' => 'Ch·ªânh s·ª≠a trong c√†i ƒë·∫∑t t√†i kho·∫£n', 'en' => 'Edit in account settings'],
        'website' => ['vi' => 'Website', 'en' => 'Website'],
        'activity' => ['vi' => 'Ho·∫°t ƒë·ªông', 'en' => 'Activity'],
        'created_thread' => ['vi' => 'ƒê√£ t·∫°o ch·ªß ƒë·ªÅ:', 'en' => 'Created thread:'],
        'created_new_thread' => ['vi' => 'ƒê√£ t·∫°o ch·ªß ƒë·ªÅ m·ªõi', 'en' => 'Created a new thread'],
        'commented_on' => ['vi' => 'ƒê√£ b√¨nh lu·∫≠n v·ªÅ:', 'en' => 'Commented on:'],
        'profile_posts' => ['vi' => 'B√†i vi·∫øt h·ªì s∆°', 'en' => 'Profile Posts'],
        'write_something' => ['vi' => 'Vi·∫øt g√¨ ƒë√≥ cho', 'en' => 'Write something on'],
        'profile' => ['vi' => 'h·ªì s∆°', 'en' => 'profile'],
        'post' => ['vi' => 'ƒêƒÉng', 'en' => 'Post'],
        'no_profile_posts' => ['vi' => 'Ch∆∞a c√≥ b√†i vi·∫øt h·ªì s∆° n√†o', 'en' => 'No profile posts yet'],
        'activities' => ['vi' => 'Ho·∫°t ƒë·ªông', 'en' => 'Activities'],
        'back_to_profile' => ['vi' => 'Quay l·∫°i h·ªì s∆°', 'en' => 'Back to Profile'],
    ],
    
    // Search and filters
    'search' => [
        'criteria' => ['vi' => 'Ti√™u ch√≠ t√¨m ki·∫øm', 'en' => 'Search Criteria'],
        'keywords' => ['vi' => 'T·ª´ kh√≥a', 'en' => 'Keywords'],
        'author' => ['vi' => 'T√°c gi·∫£', 'en' => 'Author'],
        'forum' => ['vi' => 'Di·ªÖn ƒë√†n', 'en' => 'Forum'],
        'date_range' => ['vi' => 'Kho·∫£ng th·ªùi gian', 'en' => 'Date Range'],
        'by' => ['vi' => 'B·ªüi', 'en' => 'By'],
        'reply_in' => ['vi' => 'Tr·∫£ l·ªùi trong', 'en' => 'Reply in'],
        'joined' => ['vi' => 'Tham gia', 'en' => 'Joined'],
    ],
    
    // Following and social
    'following' => [
        'following' => ['vi' => 'ƒêang theo d√µi', 'en' => 'Following'],
        'followers' => ['vi' => 'Ng∆∞·ªùi theo d√µi', 'en' => 'Followers'],
        'followed_threads' => ['vi' => 'Ch·ªß ƒë·ªÅ ƒë√£ theo d√µi', 'en' => 'Followed Threads'],
        'participated_discussions' => ['vi' => 'Th·∫£o lu·∫≠n ƒë√£ tham gia', 'en' => 'Participated Discussions'],
        'filters' => ['vi' => 'B·ªô l·ªçc', 'en' => 'Filters'],
        'people_following_you' => ['vi' => 'Ng∆∞·ªùi ƒëang theo d√µi b·∫°n', 'en' => 'People Following You'],
        'people_you_follow' => ['vi' => 'Ng∆∞·ªùi b·∫°n ƒëang theo d√µi', 'en' => 'People You Follow'],
        'follow' => ['vi' => 'Theo d√µi', 'en' => 'Follow'],
    ],
    
    // Bookmarks
    'bookmarks' => [
        'thread_in' => ['vi' => 'Ch·ªß ƒë·ªÅ trong', 'en' => 'Thread in'],
        'reply_in' => ['vi' => 'Tr·∫£ l·ªùi trong', 'en' => 'Reply in'],
        'bookmarked_item' => ['vi' => 'M·ª•c ƒë√£ ƒë√°nh d·∫•u', 'en' => 'Bookmarked item'],
        'notes' => ['vi' => 'Ghi ch√∫', 'en' => 'Notes'],
        'bookmarked' => ['vi' => 'ƒê√£ ƒë√°nh d·∫•u', 'en' => 'Bookmarked'],
    ],
    
    // Conversations
    'conversations' => [
        'conversation' => ['vi' => 'Cu·ªôc tr√≤ chuy·ªán', 'en' => 'Conversation'],
        'invite_participants' => ['vi' => 'M·ªùi ng∆∞·ªùi tham gia', 'en' => 'Invite participants'],
        'mute_conversation' => ['vi' => 'T·∫Øt ti·∫øng cu·ªôc tr√≤ chuy·ªán', 'en' => 'Mute conversation'],
        'report' => ['vi' => 'B√°o c√°o', 'en' => 'Report'],
        'leave_conversation' => ['vi' => 'R·ªùi kh·ªèi cu·ªôc tr√≤ chuy·ªán', 'en' => 'Leave conversation'],
    ],
    
    // FAQ
    'faq' => [
        'categories' => ['vi' => 'Danh m·ª•c', 'en' => 'Categories'],
        'still_have_questions' => ['vi' => 'V·∫´n c√≤n th·∫Øc m·∫Øc?', 'en' => 'Still have questions?'],
        'contact_support' => ['vi' => 'Li√™n h·ªá h·ªó tr·ª£', 'en' => 'Contact Support'],
    ],
    
    // New content
    'new_content' => [
        'newest_threads' => ['vi' => 'Ch·ªß ƒë·ªÅ m·ªõi nh·∫•t', 'en' => 'Newest Threads'],
        'view_all' => ['vi' => 'Xem t·∫•t c·∫£', 'en' => 'View All'],
        'by' => ['vi' => 'B·ªüi', 'en' => 'By'],
        'in' => ['vi' => 'trong', 'en' => 'in'],
        'no_threads_found' => ['vi' => 'Kh√¥ng t√¨m th·∫•y ch·ªß ƒë·ªÅ n√†o', 'en' => 'No threads found'],
    ],
    
    // Business and features
    'business' => [
        'premium_listing_description' => ['vi' => 'Danh s√°ch cao c·∫•p xu·∫•t hi·ªán ·ªü ƒë·∫ßu k·∫øt qu·∫£ t√¨m ki·∫øm v√† trang danh m·ª•c, mang l·∫°i kh·∫£ nƒÉng hi·ªÉn th·ªã t·ªëi ƒëa cho doanh nghi·ªáp c·ªßa b·∫°n. Ch√∫ng c≈©ng bao g·ªìm c√°c y·∫øu t·ªë h√¨nh ·∫£nh n√¢ng cao ƒë·ªÉ l√†m cho danh s√°ch c·ªßa b·∫°n n·ªïi b·∫≠t so v·ªõi ƒë·ªëi th·ªß c·∫°nh tranh.', 'en' => 'Premium listings appear at the top of search results and category pages, giving your business maximum visibility. They also include enhanced visual elements to make your listing stand out from the competition.'],
        'can_cancel_anytime' => ['vi' => 'C√≥, b·∫°n c√≥ th·ªÉ h·ªßy ƒëƒÉng k√Ω b·∫•t c·ª© l√∫c n√†o. D·ªãch v·ª• c·ªßa b·∫°n s·∫Ω ti·∫øp t·ª•c cho ƒë·∫øn h·∫øt chu k·ª≥ thanh to√°n hi·ªán t·∫°i.', 'en' => 'Yes, you can cancel your subscription at any time. Your services will continue until the end of your current billing period.'],
        'enterprise_packages' => ['vi' => 'C√≥, ch√∫ng t√¥i cung c·∫•p c√°c g√≥i doanh nghi·ªáp t√πy ch·ªânh cho c√°c doanh nghi·ªáp l·ªõn h∆°n c√≥ nhu c·∫ßu c·ª• th·ªÉ. Vui l√≤ng li√™n h·ªá v·ªõi ƒë·ªôi ng≈© b√°n h√†ng c·ªßa ch√∫ng t√¥i ƒë·ªÉ th·∫£o lu·∫≠n v·ªÅ y√™u c·∫ßu c·ªßa b·∫°n v√† nh·∫≠n gi·∫£i ph√°p ph√π h·ª£p.', 'en' => 'Yes, we offer custom enterprise packages for larger businesses with specific needs. Please contact our sales team to discuss your requirements and get a tailored solution.'],
    ],
];

// Function to add keys to translation files
function addKeysToFile($filePath, $keys, $lang) {
    if (!file_exists($filePath)) {
        // Create file if it doesn't exist
        $template = "<?php\n\n/**\n * " . ucfirst(basename($filePath, '.php')) . " Translation File - " . 
                   ($lang === 'vi' ? 'Vietnamese' : 'English') . "\n */\n\nreturn [\n];\n";
        
        if (!file_put_contents($filePath, $template)) {
            echo "‚ùå Failed to create $filePath\n";
            return false;
        }
        echo "üìÑ Created new file: $filePath\n";
    }
    
    $content = file_get_contents($filePath);
    if ($content === false) {
        echo "‚ùå Failed to read $filePath\n";
        return false;
    }
    
    // Find the last closing bracket (either ]; or );)
    $lastBracketPos = strrpos($content, '];');
    if ($lastBracketPos === false) {
        $lastBracketPos = strrpos($content, ');');
        if ($lastBracketPos === false) {
            echo "‚ùå Could not find closing bracket in $filePath\n";
            return false;
        }
    }
    
    // Build new keys string
    $newKeysString = '';
    $addedCount = 0;
    
    foreach ($keys as $key => $translations) {
        if (isset($translations[$lang])) {
            $value = $translations[$lang];
            // Escape single quotes in the value
            $value = str_replace("'", "\\'", $value);
            $newKeysString .= "  '$key' => '$value',\n";
            $addedCount++;
        }
    }
    
    if (empty($newKeysString)) {
        echo "‚ÑπÔ∏è  No keys to add for $lang\n";
        return true;
    }
    
    // Insert new keys before the closing bracket
    $beforeClosing = substr($content, 0, $lastBracketPos);
    $afterClosing = substr($content, $lastBracketPos);
    
    $newContent = $beforeClosing . $newKeysString . $afterClosing;
    
    // Write back to file
    if (file_put_contents($filePath, $newContent)) {
        echo "‚úÖ Added $addedCount keys to $filePath\n";
        return true;
    } else {
        echo "‚ùå Failed to write $filePath\n";
        return false;
    }
}

$totalAdded = 0;

foreach ($additionalKeys as $category => $keys) {
    echo "üìÅ Processing category: $category\n";
    
    // Add to Vietnamese file
    $viFile = __DIR__ . "/resources/lang/vi/$category.php";
    if (addKeysToFile($viFile, $keys, 'vi')) {
        $totalAdded += count($keys);
    }
    
    // Add to English file
    $enFile = __DIR__ . "/resources/lang/en/$category.php";
    addKeysToFile($enFile, $keys, 'en');
    
    echo "\n";
}

echo "=== SUMMARY ===\n";
echo "Total keys added: $totalAdded\n";
echo "Categories processed: " . count($additionalKeys) . "\n";

echo "\n‚úÖ Remaining frontend keys addition completed at " . date('Y-m-d H:i:s') . "\n";
?>

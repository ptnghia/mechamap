/**
 * TinyMCE Custom Styling for MechaMap
 * Ensures consistent appearance and mobile responsiveness
 */

/* TinyMCE Container Styling */
.tinymce-editor-wrapper {
    position: relative;
    margin-bottom: 1rem;
}

.tinymce-loading {
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    background: #f8f9fa;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tinymce-loading .spinner-border {
    width: 1.5rem;
    height: 1.5rem;
}

/* TinyMCE Editor Styling */
.tox.tox-tinymce {
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    box-shadow: none;
    font-family: "Roboto Condensed", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

.tox.tox-tinymce:focus-within {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

/* Validation States */
.tox.tox-tinymce.is-invalid {
    border-color: #dc3545 !important;
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25) !important;
}

.tox.tox-tinymce.is-invalid .tox-toolbar,
.tox.tox-tinymce.is-invalid .tox-statusbar {
    border-color: #dc3545 !important;
}

.tox.tox-tinymce.is-valid {
    border-color: #28a745 !important;
}

/* Toolbar Styling */
.tox .tox-toolbar {
    background: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
    padding: 0.5rem;
}

.tox .tox-toolbar__group {
    margin: 0 0.25rem;
}

.tox .tox-tbtn {
    margin: 0 1px;
    border-radius: 0.25rem;
    transition: all 0.15s ease-in-out;
}

.tox .tox-tbtn:hover {
    background: #e9ecef;
    border-color: #adb5bd;
}

.tox .tox-tbtn--enabled,
.tox .tox-tbtn--enabled:hover {
    background: #007bff;
    border-color: #007bff;
    color: white;
}

.tox .tox-tbtn--enabled:hover {
    background: #0056b3;
    border-color: #0056b3;
}

/* Menubar Styling */
.tox .tox-menubar {
    background: #ffffff;
    border-bottom: 1px solid #dee2e6;
}

/* Content Area Styling */
.tox .tox-edit-area {
    border: none;
}

.tox .tox-edit-area__iframe {
    background: white;
    border: none;
}

/* Statusbar Styling */
.tox .tox-statusbar {
    background: #f8f9fa;
    border-top: 1px solid #dee2e6;
    color: #6c757d;
    font-size: 0.875rem;
}

/* Drag and Drop Styling */
.tinymce-drag-over .tox-tinymce {
    border-color: #007bff !important;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;
    background: rgba(0, 123, 255, 0.05);
}

.tinymce-drag-over .tox-edit-area__iframe {
    pointer-events: none;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .tox.tox-tinymce {
        min-width: 100% !important;
        max-width: 100% !important;
    }
    
    .tox .tox-toolbar {
        flex-wrap: wrap;
        padding: 0.25rem;
    }
    
    .tox .tox-toolbar__group {
        margin: 0.125rem;
        flex-wrap: wrap;
    }
    
    .tox .tox-tbtn {
        margin: 1px;
        min-width: 32px;
        min-height: 32px;
    }
    
    .tox .tox-toolbar__primary {
        flex-wrap: wrap;
    }
    
    /* Hide less important buttons on mobile */
    .tox .tox-tbtn[title*="Fullscreen"],
    .tox .tox-tbtn[title*="Help"],
    .tox .tox-tbtn[title*="Source code"] {
        display: none;
    }
}

@media (max-width: 576px) {
    .tox .tox-toolbar {
        padding: 0.125rem;
    }
    
    .tox .tox-tbtn {
        min-width: 28px;
        min-height: 28px;
        font-size: 0.75rem;
    }
    
    /* Further simplify toolbar on very small screens */
    .tox .tox-tbtn[title*="Align"],
    .tox .tox-tbtn[title*="Indent"],
    .tox .tox-tbtn[title*="Outdent"] {
        display: none;
    }
}

/* Dialog and Modal Styling */
.tox .tox-dialog {
    border-radius: 0.375rem;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.tox .tox-dialog__header {
    background: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
    border-radius: 0.375rem 0.375rem 0 0;
}

.tox .tox-dialog__footer {
    background: #f8f9fa;
    border-top: 1px solid #dee2e6;
    border-radius: 0 0 0.375rem 0.375rem;
}

.tox .tox-button {
    border-radius: 0.25rem;
    transition: all 0.15s ease-in-out;
}

.tox .tox-button--primary {
    background: #007bff;
    border-color: #007bff;
}

.tox .tox-button--primary:hover {
    background: #0056b3;
    border-color: #0056b3;
}

/* Notification Styling */
.tox .tox-notification {
    border-radius: 0.375rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}

.tox .tox-notification--success {
    background: #d4edda;
    border-color: #c3e6cb;
    color: #155724;
}

.tox .tox-notification--warning {
    background: #fff3cd;
    border-color: #ffeaa7;
    color: #856404;
}

.tox .tox-notification--error {
    background: #f8d7da;
    border-color: #f5c6cb;
    color: #721c24;
}

/* Custom Button Styling */
.tox .tox-tbtn[title*="Trích dẫn"],
.tox .tox-tbtn[title*="Quote"] {
    background: #6f42c1;
    color: white;
    border-color: #6f42c1;
}

.tox .tox-tbtn[title*="Trích dẫn"]:hover,
.tox .tox-tbtn[title*="Quote"]:hover {
    background: #5a32a3;
    border-color: #5a32a3;
}

.tox .tox-tbtn[title*="Code"] {
    background: #e83e8c;
    color: white;
    border-color: #e83e8c;
}

.tox .tox-tbtn[title*="Code"]:hover {
    background: #d91a72;
    border-color: #d91a72;
}

/* Placeholder Styling */
.tox .tox-edit-area__iframe body[data-mce-placeholder]:not(.mce-visualblocks)::before {
    color: #6c757d;
    font-style: italic;
    position: absolute;
    top: 8px;
    left: 8px;
    pointer-events: none;
}

/* Focus Styling */
.tox.tox-tinymce.tox-tinymce--focus {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

/* Loading State */
.tinymce-editor-wrapper.loading .tox-tinymce {
    opacity: 0.6;
    pointer-events: none;
}

/* Error State */
.tinymce-editor-wrapper.error .tox-tinymce {
    border-color: #dc3545;
    background: #fff5f5;
}

/* Success State */
.tinymce-editor-wrapper.success .tox-tinymce {
    border-color: #28a745;
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
    .tox.tox-tinymce {
        background: #2d3748;
        border-color: #4a5568;
    }
    
    .tox .tox-toolbar {
        background: #1a202c;
        border-color: #4a5568;
    }
    
    .tox .tox-statusbar {
        background: #1a202c;
        border-color: #4a5568;
        color: #a0aec0;
    }
    
    .tox .tox-edit-area__iframe {
        background: #2d3748;
    }
}

/* Print Styles */
@media print {
    .tox.tox-tinymce {
        border: none;
        box-shadow: none;
    }
    
    .tox .tox-toolbar,
    .tox .tox-statusbar {
        display: none;
    }
    
    .tox .tox-edit-area__iframe {
        border: none;
        background: white;
    }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
    .tox.tox-tinymce {
        border-width: 2px;
        border-color: #000;
    }
    
    .tox .tox-tbtn {
        border-width: 2px;
    }
    
    .tox .tox-tbtn--enabled {
        background: #000;
        color: #fff;
        border-color: #000;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    .tox .tox-tbtn,
    .tox .tox-button {
        transition: none;
    }
    
    .tinymce-loading .spinner-border {
        animation: none;
    }
}

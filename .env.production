# =============================================================================
# MECHAMAP PRODUCTION ENVIRONMENT CONFIGURATION
# Domain: https://mechamap.com
# Updated: July 2025
# CRITICAL: Never commit this file to version control
# =============================================================================

# Application Configuration
APP_NAME=MechaMap
APP_ENV=production
APP_KEY=base64:GvLHGSw7XSZVA4aAs/WWIvnKDrivJzPGsqlDlR+/cuY=
APP_DEBUG=false
APP_TIMEZONE=Asia/Ho_Chi_Minh
APP_URL=https://mechamap.com
FRONTEND_URL=https://mechamap.com
APP_LOCALE=vi
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

# JWT Configuration for WebSocket Authentication - SYNCHRONIZED WITH NODE.JS
JWT_SECRET=cc779c53b425a9c6efab2e9def898a025bc077dec144726be95bd50916345e02d2535935490f7c047506c7ae494d5d4372d38189a5c4d8922a326d79090ae744

# Asset Cache Settings - Production Optimization
ASSET_VERSIONING_ENABLED=true
ASSET_VERSIONING_METHOD=filemtime
ASSET_FORCE_RELOAD=false

# Security Settings
BCRYPT_ROUNDS=12

# Database Configuration - Production MySQL
DB_CONNECTION=mysql
DB_HOST=YOUR_PRODUCTION_DB_HOST
DB_PORT=3306
DB_DATABASE=mechamap_production
DB_USERNAME=mechamap_prod_user
DB_PASSWORD=YOUR_SECURE_PRODUCTION_DB_PASSWORD
DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci

# Database Optimization
DB_QUERY_CACHE_ENABLED=true
DB_SLOW_QUERY_LOG=true
DB_SLOW_QUERY_TIME=2
DB_CONNECTION_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30
DB_RECONNECT_ATTEMPTS=3

# Cache Configuration - Production File Cache (Redis Disabled)
CACHE_STORE=file
CACHE_PREFIX=mechamap_prod_cache

# Redis Configuration - DISABLED
# REDIS_CLIENT=phpredis
# REDIS_HOST=YOUR_REDIS_HOST
# REDIS_PASSWORD=YOUR_REDIS_PASSWORD
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_CACHE_DB=1
# REDIS_SESSION_DB=2
# REDIS_QUEUE_DB=3

# Session Configuration - Production Database (Redis Disabled)
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.mechamap.com
SESSION_SECURE_COOKIES=true
SESSION_SAME_SITE=lax
SESSION_COOKIE_HTTPONLY=true
SESSION_PARTITIONED_COOKIES=true

# Queue Configuration - Production Database (Redis Disabled)
QUEUE_CONNECTION=database
QUEUE_FAILED_DRIVER=database-uuids
QUEUE_RETRY_AFTER=90
QUEUE_MAX_TRIES=3
QUEUE_TIMEOUT=60

# Logging Configuration - Production
LOG_CHANNEL=daily
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error
LOG_DAILY_DAYS=30

# Broadcasting Configuration - Using Node.js WebSocket Server
BROADCAST_CONNECTION=nodejs
NODEJS_BROADCAST_URL=https://realtime.mechamap.com

# WebSocket Server Configuration (Production)
WEBSOCKET_SERVER_URL=https://realtime.mechamap.com
WEBSOCKET_SERVER_HOST=realtime.mechamap.com
WEBSOCKET_SERVER_PORT=443
WEBSOCKET_SERVER_SECURE=true

# WebSocket API Key Authentication
WEBSOCKET_API_KEY_HASH=80261363c9a71338d034b13d3ffa633e814f78412bde2ad7669a5906c6079558

# Redis Configuration - Disabled (not using Redis)
# REDIS_HOST=127.0.0.1
# REDIS_PASSWORD=null
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_CACHE_DB=1
# REDIS_SESSION_DB=2
# REDIS_QUEUE_DB=3

# Mail Configuration
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=noreply@mechamap.com
MAIL_PASSWORD=your_mail_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@mechamap.com
MAIL_FROM_NAME="MechaMap"

# Filesystem Configuration
FILESYSTEM_DISK=public
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# Logging Configuration
LOG_CHANNEL=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# Broadcasting Configuration - REMOVED DUPLICATE

# Database Optimization (without Redis)
DB_QUERY_CACHE_ENABLED=true
DB_SLOW_QUERY_LOG=true
DB_SLOW_QUERY_TIME=2

# Vite Configuration
VITE_APP_NAME="${APP_NAME}"
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# Security Configuration
SANCTUM_STATEFUL_DOMAINS=mechamap.com,www.mechamap.com
SPA_URL=https://mechamap.com

# Social Media Configuration
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=https://mechamap.com/auth/google/callback

FACEBOOK_CLIENT_ID=your_facebook_client_id
FACEBOOK_CLIENT_SECRET=your_facebook_client_secret
FACEBOOK_REDIRECT_URI=https://mechamap.com/auth/facebook/callback

# Performance & Monitoring
DEBUGBAR_ENABLED=false
TELESCOPE_ENABLED=false

# Rate Limiting
RATE_LIMIT_API=60
RATE_LIMIT_LOGIN=5

# File Upload Limits
MAX_UPLOAD_SIZE=10240
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,ppt,pptx,zip,rar,7z,dwg,step,iges

# Forum Configuration
THREADS_PER_PAGE=20
COMMENTS_PER_PAGE=25
SEARCH_RESULTS_PER_PAGE=15
MAX_THREAD_TITLE_LENGTH=255
MAX_COMMENT_LENGTH=10000

# SEO Configuration
SITE_META_DESCRIPTION="Cộng đồng kỹ sư cơ khí Việt Nam - Chia sẻ kinh nghiệm, thảo luận kỹ thuật và học hỏi về PLC, Robot, CNC, CAD/CAM"
SITE_META_KEYWORDS="cơ khí, kỹ thuật, PLC, robot, CNC, CAD, CAM, automation, industry 4.0, việt nam"
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
GOOGLE_SITE_VERIFICATION=your_verification_code

# Backup Configuration
BACKUP_DISK=local
BACKUP_SCHEDULE="daily"
BACKUP_RETENTION_DAYS=30

# Performance Optimization (without Redis)
# File-based cache optimization
CACHE_FILE_PERMISSIONS=0644
CACHE_STORE_SERIALIZE=true

# Session optimization
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SECURE=true
SESSION_PARTITIONED_COOKIES=true

# Queue optimization
QUEUE_RETRY_AFTER=90
QUEUE_MAX_TRIES=3
QUEUE_TIMEOUT=60

# View cache optimization
VIEW_CACHE_ENABLED=true
CONFIG_CACHE_ENABLED=true
ROUTE_CACHE_ENABLED=true

# Database connection optimization
DB_CONNECTION_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30
DB_RECONNECT_ATTEMPTS=3

# Memory optimization
MEMORY_LIMIT=256M
MAX_EXECUTION_TIME=300

# Opcache optimization (if available)
OPCACHE_ENABLED=true
OPCACHE_MEMORY_CONSUMPTION=128
OPCACHE_MAX_ACCELERATED_FILES=4000

# =============================================================================
# Payment Gateway Configuration - Production
# =============================================================================

# Stripe Payment Gateway (International) - Production Keys
STRIPE_KEY=pk_live_YOUR_PRODUCTION_STRIPE_PUBLISHABLE_KEY
STRIPE_SECRET=sk_live_YOUR_PRODUCTION_STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_PRODUCTION_STRIPE_WEBHOOK_SECRET
STRIPE_WEBHOOK_URL=https://mechamap.com/api/webhooks/stripe

# Centralized Payment Admin Accounts - Production
STRIPE_ADMIN_ACCOUNT_ID=acct_YOUR_PRODUCTION_STRIPE_ACCOUNT
SEPAY_ADMIN_BANK_CODE=MBBank
SEPAY_ADMIN_ACCOUNT_NUMBER=YOUR_PRODUCTION_BANK_ACCOUNT
SEPAY_ADMIN_ACCOUNT_NAME="CONG TY CO PHAN CONG NGHE MECHAMAP"

# SePay Gateway (Vietnam) - Production
SEPAY_BANK_CODE=MBBank
SEPAY_ACCOUNT_NUMBER=YOUR_PRODUCTION_SEPAY_ACCOUNT
SEPAY_ACCOUNT_NAME="CONG TY CO PHAN CONG NGHE MECHAMAP"
SEPAY_WEBHOOK_SECRET=YOUR_PRODUCTION_SEPAY_WEBHOOK_SECRET
SEPAY_WEBHOOK_URL=https://mechamap.com/sepay-webhook

# =============================================================================
# Production Monitoring & Security
# =============================================================================

# Error Tracking (Sentry)
SENTRY_LARAVEL_DSN=YOUR_SENTRY_DSN
SENTRY_TRACES_SAMPLE_RATE=0.1

# Performance Monitoring
NEW_RELIC_LICENSE_KEY=YOUR_NEW_RELIC_KEY
NEW_RELIC_APP_NAME=MechaMap-Production

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# CORS Configuration - Production
CORS_ALLOWED_ORIGINS=https://mechamap.com,https://www.mechamap.com,https://realtime.mechamap.com

# =============================================================================
# Production CDN & Storage
# =============================================================================

# CloudFlare CDN
CLOUDFLARE_ZONE_ID=YOUR_CLOUDFLARE_ZONE_ID
CLOUDFLARE_API_TOKEN=YOUR_CLOUDFLARE_API_TOKEN

# Asset CDN
ASSET_CDN_URL=https://cdn.mechamap.com

# AWS S3 Storage (Recommended for Production)
# FILESYSTEM_DISK=s3
# AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
# AWS_DEFAULT_REGION=ap-southeast-1
# AWS_BUCKET=mechamap-production
# AWS_USE_PATH_STYLE_ENDPOINT=false

# =============================================================================
# Production SSL/TLS Configuration (Managed by Hosting)
# =============================================================================

# Force HTTPS - SSL certificates managed by hosting provider
FORCE_HTTPS=true
SECURE_COOKIES=true
